sudo: required
services:
- docker
script:
- docker network create nginx-proxy
- docker-compose up --exit-code-from hugo-builder hugo-builder
before_deploy:
- openssl aes-256-cbc -K $encrypted_fa0b121693fc_key -iv $encrypted_fa0b121693fc_iv
  -in deploy_rsa.enc -out deploy_rsa -d
- eval "$(ssh-agent -s)"
- chmod 600 deploy_rsa
- ssh-add deploy_rsa
- echo -e "Host ${DEPLOY_HOST}\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
deploy:
  provider: script
  skip-cleanup: true
  script: rsync -r --quiet --delete-after ${TRAVIS_BUILD_DIR}/public/* ${DEPLOY_USER}@${DEPLOY_HOST}:${DEPLOY_DIRECTORY}
  on:
    branch: master
env:
  global:
  - secure: cttu0lhPgzsyT1j6c4f06445ucLqq3LCgXvsrHlrQ+N5x2gfqiS7uGB3guCQYACTTf/APSahWnMctLEuMYlYiHz20RhbCdr3T/S4nW53Wl+67aQZKxL28cPfwdZAoaLbnwrjLvTby71Qm+HJBmKR7ZlNdKxEopJWh1ZWLELG1AHFV4lnsCUJQWOrDuE6Y19ssDUfery9Sdlq82EXsP/2hAla1+tBAz8GLoxJD/ivjAhKNagesq+azdIRVtgP+YVIzXmHzn88+Q9ALw1GVtzZxt+W9n3YGwAxuPcsLQpwACTA2VS2Zlim75ctA/UodoY7JxKCTV4yPl6nTIkxA3cjcxxAOQsedAyIYx62V2mTTaolOHiEgaXbjczxjuMv+uLjznXAEgFhTccAb4Oqgm8/IWiYdQyl2l7Pk+rgOszVp4XVbt1Bm81yD4pfw3Osjgm65rqOF39BysAX9GZMvwpI/tZffleTd9x/i4K3kftj2p5uvF2S64O+Pqb9qJbsA0bhMpSQK0jQDzMHqYdrd65zxRNjz3+nx+ZldzLPkJEw8eakNoqupIybFmwlOYjHtO3+vbANbXLQIqCKzfxS3sJXOBYt3u17JP5fsmrD71u0/1+vVtFZdJN4/jDonjNtRTODwrWKpxYC90Xarj41WYIEHjP/4+8lnMM8fLTnWN7xrjo=
  - secure: q9w+YSz8VEysCJNCYiZlkzlXvQ8zM+dY0HUnAvxYaKIdQZbTNSI/z72KaCkgyaze8UwMXm8LD2OHOZ9ZMwOMFJGmnZbFP17ZwKfjMcRxqlqS/m0bDdMcEDf8QJCiSIWDTaZmpaeYW6FFWx5fmT2xpMFW8v+eghk9lwWVd4xnCrXFXYtwtXIrAy4I5XbYQPnNaExJst5JBAWMVkAP549dOUxEJunilVOFgZkZYyuYS0F8RLs735g1093cGK9SCv6xXv8jANa4l6gc8fS7xC7QBsw+2v8qq+Grm0f18CKx3ctVg3APX/UT7YYCmi+p2hPMeTww14ZIUJJ/IAcxzwJuFBZnjUL/POpK6L0gK+E5n/H3LC6DW6Lp71XJ3AOrMh6/3JwG0kEqb+wqUYcqEU5lDlaXiCbrfRysNQZJZhw+Kk4cdrz8ak9hpDu0RpMR29XICsj28nA7mBq80dCyEOfSX9OB6cqEsmbGa78LMXqwmBh/CDae4ejWqpo7sedPZjk9ZAPlNAAA1EtJxhO2lhsU5uIkvIx0StJYSqWu/rPRUL25bUjekONQMSG8JqJw8QaCmy/E9RcwCjx6EIiWkCU+pR9GVNTcoqNwfsCbMHf2nTXGYzoZSblnujsBvGYy0yVAeZgznlB8MwG0VRp3UtOK+w3IZwE/eRvEDXlORp0mBCs=
  - secure: OIeSL89ikWix6YxD7EgqV/TsQau1flI4slJdtw4wvB4k3uXvD3N8H0oicOcP3GaVueUPoNF4AHnktoJ2fTyOkHmeI464ubwQr1Jeh/cNn0K0b+XSyKJSzMxFUCDmERLVkQt5YTnrpuP1xfN6io25odn9WaL9cYjKWinIS53s4VExihVA62Jveaul9ZeZ7JwHLKjdQtHF4re9fwxjOzYUWRH34v55DH8XZHZd3DB0Qc2W+W9IW0S76lUmhddwxqcB3nDe6hoaY3NZDUHWTbkKeUZ/quGz4KQnGWWiEeX/57F1qjoje74JTYDbZzclMVas15bAhU0ZJ1nHX3KmcoPIgw+XeiO9kPhhSEXMM/DeiEU47OiBm4NuKKJ1ZA8YVTJRLygTlo0kkqsmUB7R3JzOSw1gU/CaQZFxk3GEroUB6jG7i4rmqETMSpYr1avUrN8xUWTtdTXmCc75R2cKvHQkwV0pe26jhlmpfGtinj4xTRCwBlPKCmgevN4Y5bCKpnZJWgMByECss4kq8YSzkHVgs469BvTDyFAHKddvun3bIL2cyWqAgBYW0YeoejdoXiNn5AemDC/otd3pdm6JT/lZOlnpM5iUwC8L8spoCg0cSkK7Dlf54XY56D2AF+eSqjofMGJW7H14slXXZjyEZwuhnrBmJt3gxn7sUKNDnu2p+Ns=
